<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="about.html" /><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Testing with Second-Generation Packaging" href="2gp-testing.html" /><link rel="prev" title="CumulusCI Flow" href="cumulusci-flow.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Run CumulusCI from GitHub Actions - CumulusCI 4.6.0.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">CumulusCI 4.6.0.dev1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">CumulusCI 4.6.0.dev1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">The <code class="docutils literal notranslate"><span class="pre">cci</span></code> Command Line</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="config.html">Configure CumulusCI</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Configure CumulusCI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="deploy.html">Configure Metadata Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scratch-orgs.html">Manage Scratch Orgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="connected-orgs.html">Connect Persistent Orgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Develop a Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Automate Data Operations</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="robot.html">Acceptance Testing with Robot Framework</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Acceptance Testing with Robot Framework</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="robot-locators.html">Managing Locators</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-advanced.html">Robot Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-tutorial.html">Robot Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-debugger.html">Robot Debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-playwright.html">Playwright Technology Preview</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="continuous-integration.html">Continuous Integration</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Continuous Integration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cumulusci-flow.html">CumulusCI Flow</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Run CumulusCI from GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="2gp-testing.html">Testing with Second-Generation Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="headless.html">Run CumulusCI Headlessly</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="packaging.html">Release Managed and Unlocked Packages</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Release Managed and Unlocked Packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="managed-package.html">Release a First-Generation Managed Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="managed-2gp.html">Release a Second-Generation Managed Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="unlocked-package.html">Release an Unlocked Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="npsp-eda-2gp.html">Extend NPSP and EDA with Second-Generation Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html">Generate Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="push-upgrades.html">Manage Push Upgrades</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="unpackaged.html">Manage Unpackaged Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Manage Unpackaged Configuration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="metadata-etl.html">Metadata ETL</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="flows.html">Flow Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="env-var-reference.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="org_config-reference.html">org_config Object Reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="about.html">About CumulusCI</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of About CumulusCI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contribute to CumulusCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html">History</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/github-actions.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="run-cumulusci-from-github-actions">
<h1>Run CumulusCI from GitHub Actions<a class="headerlink" href="#run-cumulusci-from-github-actions" title="Link to this heading">¶</a></h1>
<p>CumulusCI can be used to run continuous integration builds with GitHub
Actions. In order to follow along, you should already have a repository
that is hosted on GitHub and configured as a CumulusCI project. In other
words, we’re assuming your project already has a <code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> and
that you are successfully running CumulusCI flows locally.</p>
<p>There is also a <a class="reference external" href="https://github.com/SFDO-Tooling/CumulusCI-CI-Demo">template
repository</a> that is
setup to run <a class="reference internal" href="cumulusci-flow.html"><span class="doc std std-doc">CumulusCI Flow</span></a> with our GitHub
Actions framework. This repository can be used as a starting point for
implementing your own project or as a reference for the following
material.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GitHub Actions are free for open source (public) repositories. Check
with GitHub about pricing for private repositories.</p>
</div>
<section id="actions-framework">
<h2>Actions Framework<a class="headerlink" href="#actions-framework" title="Link to this heading">¶</a></h2>
<p>Our GitHub Actions framework lets you choose how much customization you wish to perform versus how much out-of-the-box functionality you’d like to use.
Applications that use our predefined workflows can get started by simply copying and pasting an example file into the repository. Applications that
prefer deep customization or do not use <a class="reference internal" href="cumulusci-flow.html"><span class="doc std std-doc">CumulusCI Flow</span></a> can easily compose our building-block Actions to suit their specific needs.</p>
<section id="reusable-workflows">
<h3>Reusable Workflows<a class="headerlink" href="#reusable-workflows" title="Link to this heading">¶</a></h3>
<p>At the highest tier of abstraction, your application can consume reusable workflows from <code class="docutils literal notranslate"><span class="pre">cumulus-actions/standard-workflows</span></code>. These workflows offer easy onboarding and don’t require any customization of the YAML to create a complete pipeline for a 1GP or 2GP project. The standard workflows include definitions of dependencies between jobs, ensuring that (for example) a Beta Test job runs after an Upload Beta job.</p>
<p>We recommend cloning the <code class="docutils literal notranslate"><span class="pre">cumulus-actions/standard-workflows</span></code> repository and pushing it into your org. (Do not fork the repository; GitHub Actions currently does not consume reusable workflows from a fork). This repository is a central control console for all of your applications using the shared workflows, making it easy to introduce (for example) new feature test-level jobs across all repos without individually updating those repos’ configurations. We reserve the right to change <code class="docutils literal notranslate"><span class="pre">cumulus-actions/standard-workflows</span></code> at any time without notice and without tagging a new version to support this control-console use case; this is the reason we encourage cloning the repository to support your own standard workflow usage.</p>
<p>We provide the following standard workflows:</p>
<p><strong>Packaging Workflows</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">beta-1gp</span></code>, expected to run on the main branch, executes Release Beta (1GP) followed by Beta Test.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">production-1gp</span></code>, expected to run on the main branch, executes Release Production (1GP) followed by Release Test.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">beta-2gp</span></code>, expected to run on the main branch, executes Release Beta (2GP) followed by Beta Test.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">production-2gp</span></code>, expected to run on the main branch, executes Release Production (2GP) followed by Release Test.</p></li>
</ul>
<p><strong>Feature Testing Workflows</strong></p>
<p>Because there is wide variance in the types of tests run in feature-level testing, we provide a number of Feature Test workflows
that combine different jobs. All of these workflows are expected to run on <code class="docutils literal notranslate"><span class="pre">feature/**</span></code> branches. Note that references to 2GP below
are part of the <a class="reference internal" href="2gp-testing.html"><span class="doc std std-doc">Testing with Second-Generation Packaging</span></a> process, and can be used on both first- and second-generation package projects.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">feature</span></code> runs unmanaged feature-test builds: Feature Test.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature-with-robot</span></code> adds a Robot Framework test job to <code class="docutils literal notranslate"><span class="pre">feature</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature-2gp</span></code> runs unmanaged and 2GP feature-test package builds: Feature Test, Build Feature Test Package, Feature Test - 2GP.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature-2gp-with-robot</span></code> adds a 2GP Robot Framework test job to <code class="docutils literal notranslate"><span class="pre">feature-2gp</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature-namespaced</span></code> runs unmanaged and namespaced-org tests: Feature Test and Feature Test - Namespaced.</p></li>
</ul>
<p>To consume a standard workflow, follow these steps.</p>
<ol class="arabic simple">
<li><p>Clone the <code class="docutils literal notranslate"><span class="pre">cumulus-actions/standard-workflows</span></code> repo. Don’t use a fork!</p></li>
<li><p>Select one or more reusable workflows you want to consume.</p></li>
<li><p>For each workflow, create a file in your repository under <code class="docutils literal notranslate"><span class="pre">.github/workflows</span></code>. Design your own
triggers, or copy from the examples below.</p></li>
<li><p>Commit the file and merge a Pull Request to your main branch.</p></li>
</ol>
<p><strong>Example 1: Feature Test workflow</strong></p>
<p>This workflow runs on feature branches before merging.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Feature Test</span>
<span class="nt">on</span><span class="p">:</span>
<span class="w">    </span><span class="nt">push</span><span class="p">:</span>
<span class="w">        </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">            </span><span class="c1"># Customize as needed for your project&#39;s branching structure.</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature/**</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">feature-test</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Feature</span><span class="nv"> </span><span class="s">Test&quot;</span>
<span class="w">        </span><span class="c1"># Replace this URL with your forked repo.</span>
<span class="w">        </span><span class="c1"># Use the feature test workflow that matches your project needs.</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cumulus-actions/standard-workflows/.github/workflows/feature-2gp.yml@main</span>
<span class="w">        </span><span class="nt">secrets</span><span class="p">:</span>
<span class="w">            </span><span class="nt">dev-hub-auth-url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">secrets.DEV_HUB_AUTH_URL</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p><strong>Example 2: Upload Beta workflow</strong></p>
<p>This workflow runs on every main-branch commit to upload a beta package release.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload Beta Release</span>
<span class="nt">on</span><span class="p">:</span>
<span class="w">    </span><span class="nt">push</span><span class="p">:</span>
<span class="w">        </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;main&quot;</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">upload-beta</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Replace this URL with your forked repo.</span>
<span class="w">        </span><span class="c1"># Use the `beta-2gp` workflow if this is a 2GP project.</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SFDO-Community/standard-workflows/.github/workflows/beta-1gp.yml@main</span>
<span class="w">        </span><span class="nt">secrets</span><span class="p">:</span>
<span class="w">            </span><span class="c1"># If this is a 2GP project, omit the packaging org auth URL.</span>
<span class="w">            </span><span class="nt">packaging-org-auth-url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">secrets.PACKAGING_ORG_AUTH_URL</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">            </span><span class="nt">dev-hub-auth-url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">secrets.DEV_HUB_AUTH_URL</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p><strong>Example 3: Upload Release workflow</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload Production Release</span>
<span class="nt">on</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workflow_dispatch</span><span class="p">:</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">upload-production-release</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Upload</span><span class="nv"> </span><span class="s">Production</span><span class="nv"> </span><span class="s">Release&quot;</span>
<span class="w">        </span><span class="c1"># Replace this URL with your forked repo.</span>
<span class="w">        </span><span class="c1"># Use the `beta-2gp` workflow if this is a 2GP project.</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SFDO-Community/standard-workflows/.github/workflows/production-1gp.yml@main</span>
<span class="w">        </span><span class="nt">secrets</span><span class="p">:</span>
<span class="w">            </span><span class="c1"># If this is a 2GP project, omit the packaging org auth URL.</span>
<span class="w">            </span><span class="nt">packaging-org-auth-url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">secrets.PACKAGING_ORG_AUTH_URL</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">            </span><span class="nt">dev-hub-auth-url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${{</span><span class="nv"> </span><span class="s">secrets.DEV_HUB_AUTH_URL</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>You can choose whether or not to pin to a version tag in your cloned <code class="docutils literal notranslate"><span class="pre">standard-workflows</span></code> repo. In many use cases, it makes the most sense <em>not</em> to do so, as we do here by referencing <code class="docutils literal notranslate"><span class="pre">&#64;main</span></code>. This allows you to use your <code class="docutils literal notranslate"><span class="pre">standard-workflows</span></code> repo as a central control console to instantly update workflow definitions across repos. For example, when prerelease scratch orgs are made available in advance of each major Salesforce release, you can add a <code class="docutils literal notranslate"><span class="pre">feature-test-prerelease</span></code> job to your standard feature workflows - enabling it for all of your projects without individually updating their repos.</p>
</section>
<section id="job-based-actions">
<h3>Job-Based Actions<a class="headerlink" href="#job-based-actions" title="Link to this heading">¶</a></h3>
<p>If you prefer to construct your own workflows, you can consume our job-based Actions as building blocks. Each job-based Action will set up
the CumulusCI and SFDX CLIs, authorize a Dev Hub and/or packaging org, check out the project, and run one or more Cumulus flows and tasks.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/release-beta-1gp</span></code> runs the flows <code class="docutils literal notranslate"><span class="pre">ci_master</span></code> and <code class="docutils literal notranslate"><span class="pre">release_beta</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/release-beta-2gp</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">release_beta_2gp</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/beta-test</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">ci_beta</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/release-production-1gp</span></code> runs the flows <code class="docutils literal notranslate"><span class="pre">ci_master</span></code> and <code class="docutils literal notranslate"><span class="pre">release_production</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/release-production-2gp</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">release_production_2gp</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/release-test</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">ci_release</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/build-unlocked-test-package</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">build_unlocked_test_package</span></code> and populates the package id onto a commit status.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/build-feature-test-package</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">build_feature_test_package</span></code> and populates the package id onto a commit status.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/feature-test</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">ci_feature</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/feature-test-2gp</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">ci_feature_2gp</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/feature-test-namespaced</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">ci_feature</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/feature-test-robot</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">qa_org</span></code>, followed by the <code class="docutils literal notranslate"><span class="pre">robot</span></code> task.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/feature-test-robot-2gp</span></code> runs the flow <code class="docutils literal notranslate"><span class="pre">qa_org_2gp</span></code>, followed by the <code class="docutils literal notranslate"><span class="pre">robot</span></code> task.</p></li>
</ul>
<p>For examples of how to apply these actions, review the standard workflows in <code class="docutils literal notranslate"><span class="pre">cumulus-actions/standard-workflows</span></code>. Each Action accepts version parameters (see Version Pinning). Each Action that creates a scratch org accepts the <code class="docutils literal notranslate"><span class="pre">dev-hub-auth-url</span></code>parameter (required) and the<code class="docutils literal notranslate"><span class="pre">org-name</span></code>parameter (defaulted). Each Action that interacts with a packaging org (1GP only) accepts the<code class="docutils literal notranslate"><span class="pre">packaging-org-auth-url</span></code> parameter.</p>
</section>
<section id="scratch-org-base-actions">
<h3>Scratch Org Base Actions<a class="headerlink" href="#scratch-org-base-actions" title="Link to this heading">¶</a></h3>
<p>All job-based Actions that create scratch orgs consume the <code class="docutils literal notranslate"><span class="pre">cumulus-actions/run-flow-scratch</span></code> or <code class="docutils literal notranslate"><span class="pre">cumulus-actions/run-robot-flow-scratch</span></code> scratch org base Actions. You can use these base Actions to create your own job-based Actions for your custom Cumulus flows.</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/run-flow-scratch</span></code> checks out your code, creates a scratch org on a given configuration (<code class="docutils literal notranslate"><span class="pre">org-name</span></code>), runs a given flow (<code class="docutils literal notranslate"><span class="pre">flow-name</span></code>) on that org, and then disposes the org. Optionally, it extracts information from the job log that matches a regex (<code class="docutils literal notranslate"><span class="pre">commit-status-regex</span></code>) and stores that information as the description on a new commit status (<code class="docutils literal notranslate"><span class="pre">commit-status-name</span></code>), prefixed by <code class="docutils literal notranslate"><span class="pre">commit-status-description-prefix</span></code>. This optional feature is used to support jobs that create per-commit package versions. The action also accepts version-pinning options (see Tool Version Pinning).</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/run-robot-flow-scratch</span></code> accepts the parameters <code class="docutils literal notranslate"><span class="pre">dev-hub-auth-url</span></code>, <code class="docutils literal notranslate"><span class="pre">org-name</span></code>, and <code class="docutils literal notranslate"><span class="pre">setup-flow</span></code>. The latter two options are required. The Action will check out your code, create an org from the configuration <code class="docutils literal notranslate"><span class="pre">org-name</span></code>, and execute <code class="docutils literal notranslate"><span class="pre">setup-flow</span></code> against it before running Robot Framework tests. It stores Robot results as an artifact. The action also accepts version-pinning options (see Tool Version Pinning).</p>
</section>
<section id="primitive-actions">
<h3>Primitive Actions<a class="headerlink" href="#primitive-actions" title="Link to this heading">¶</a></h3>
<p>Finally, we also provide a suite of primitive Actions that underlie the base scratch org Actions and all persistent-org Actions.
You can use these primitive Actions to construct your own SDLC automation, even if it’s very different from CumulusCI Flow. Compose primitive
Actions to create workflow automation that delivers to persistent orgs, authenticates using the JWT flow, or sits within your existing
automation structures.</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/default-package-versions</span></code> accepts as input user-supplied <code class="docutils literal notranslate"><span class="pre">cumulusci-version</span></code> and <code class="docutils literal notranslate"><span class="pre">sfdx-version</span></code> values. If these values are non-empty, they are returned; otherwise, default values are returned. The outputs have the same names as the inputs.</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/setup-cumulus</span></code> installs CumulusCI and SFDX. It accepts optional <code class="docutils literal notranslate"><span class="pre">cumulusci-version</span></code> and <code class="docutils literal notranslate"><span class="pre">sfdx-version</span></code> inputs and uses <code class="docutils literal notranslate"><span class="pre">cumulus-actions/default-package-versions&#64;main</span></code> to populate them if not supplied (see below under Tool Version Pinning for discussion). The action uses the built-in caching functionality of GitHub Actions to cache installed NPM and Python packages, using your supplied versions as the cache key.</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/authorize-org</span></code> accepts an <code class="docutils literal notranslate"><span class="pre">auth-url</span></code> and <code class="docutils literal notranslate"><span class="pre">org-name</span></code>, and ingests that org authorization into the SFDX and CumulusCI keychains. If the optional <code class="docutils literal notranslate"><span class="pre">dev-hub</span></code> input is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, it assigns this org as the default Dev Hub.</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/run-flow</span></code> executes a given flow (<code class="docutils literal notranslate"><span class="pre">flow-name</span></code>) against a given org (<code class="docutils literal notranslate"><span class="pre">org-name</span></code>). The org must be available in the keychain, or be a scratch org configuration, and CumulusCI and SFDX must already be set up.</p>
<p><code class="docutils literal notranslate"><span class="pre">cumulus-actions/run-task</span></code> executes a given task (<code class="docutils literal notranslate"><span class="pre">task-name</span></code>) against a given org (<code class="docutils literal notranslate"><span class="pre">org-name</span></code>). The org must be available in the keychain, or be a scratch org configuration, and CumulusCI and SFDX must already be set up.</p>
</section>
</section>
<section id="tool-version-pinning">
<h2>Tool Version Pinning<a class="headerlink" href="#tool-version-pinning" title="Link to this heading">¶</a></h2>
<p>All non-primitive Actions that run Cumulus operations accept two optional parameters, <code class="docutils literal notranslate"><span class="pre">cumulusci-version</span></code> and <code class="docutils literal notranslate"><span class="pre">sfdx-version</span></code>. If these inputs are supplied, the Actions will ensure that the specified versions of the tools are installed.</p>
<p>If the inputs are not populated, the Action will source a default version for each tool from <code class="docutils literal notranslate"><span class="pre">cumulus-actions/default-package-versions&#64;main</span></code>. Note that we do not pin a tag on <code class="docutils literal notranslate"><span class="pre">default-package-versions</span></code>: the default CumulusCI and SFDX versions may be changed without publishing a new Action tag, provided that the overall behavior of the Action is not altered. We use this flexibility to ensure that we pin stable versions, and reserve the right to roll back the default in case of unexpected regressions.</p>
<p>The Cumulus Suite Actions <strong>require CumulusCI 3.61.1 or greater</strong> for any operation that references a packaging org.</p>
</section>
<section id="environment-setup-and-org-authorization">
<h2>Environment Setup and Org Authorization<a class="headerlink" href="#environment-setup-and-org-authorization" title="Link to this heading">¶</a></h2>
<p>All Actions that interact with persistent orgs (such as a packaging org or Dev Hub) authorize those orgs using SFDX Auth URLs.
These URLs are obtained via by first authorizing an org to the CLI:</p>
<p><code class="docutils literal notranslate"><span class="pre">sf</span> <span class="pre">org</span> <span class="pre">login</span> <span class="pre">web</span> <span class="pre">-a</span> <span class="pre">packaging</span></code></p>
<p>and then retrieving the auth URL from the JSON output of the command</p>
<p><code class="docutils literal notranslate"><span class="pre">sf</span> <span class="pre">org</span> <span class="pre">display</span> <span class="pre">--json</span> <span class="pre">--verbose</span></code></p>
<p>under the key <code class="docutils literal notranslate"><span class="pre">sfdxAuthUrl</span></code> under <code class="docutils literal notranslate"><span class="pre">result</span></code>.</p>
<p>If you have <code class="docutils literal notranslate"><span class="pre">jq</span></code> installed, you can do <code class="docutils literal notranslate"><span class="pre">sf</span> <span class="pre">org</span> <span class="pre">display</span> <span class="pre">-u</span> <span class="pre">packaging-gh</span> <span class="pre">--json</span> <span class="pre">--verbose</span> <span class="pre">|</span> <span class="pre">jq</span> <span class="pre">-r</span> <span class="pre">.result.sfdxAuthUrl</span></code>.</p>
<p>First-generation package projects will have two auth-URL secrets, for the packaging org and for the Dev Hub.
Second-generation and Unlocked package projects will have at least one auth-URL secret, for the Dev Hub, and may have
two to provide distinct access levels (see below).</p>
<p>Auth URLs should always be stored in GitHub Secrets. There are a number of different ways to organize secret storage.
While we offer recommended best practices here, you should always follow the security guidance of your own
teams.</p>
<section id="dev-hub-auth-urls-for-scratch-org-builds">
<h3>Dev Hub Auth URLs for Scratch Org Builds<a class="headerlink" href="#dev-hub-auth-urls-for-scratch-org-builds" title="Link to this heading">¶</a></h3>
<p>Every Action that creates a scratch org requires a <code class="docutils literal notranslate"><span class="pre">dev-hub-auth-url</span></code> parameter containing an Auth URL.
We recommend storing this URL in a GitHub Secret called <code class="docutils literal notranslate"><span class="pre">DEV_HUB_AUTH_URL</span></code>, a convention used in our
reusable workflows.</p>
<p>If you’re working on a single repository, you can store your Dev Hub auth URL in a repository secret.
Locate the Settings-&gt;Secrets-&gt;Actions section of your GitHub repo, and click “New repository secret”.
Add your auth URL and save the secret.</p>
<p><img alt="image of GitHub repository secret UI" src="_images/github-repository-secret.png" /></p>
<p>If you’re working in a GitHub organization with multiple repositories, and you want to share the same
user access to the Dev Hub across repositories, you can store your auth URL as an organization secret.
Locate the Organization-&gt;Settings-&gt;Secrets-&gt;Actions section, and click “New organization secret”.
Add your auth URL and save the secret.</p>
<p><img alt="image of GitHub organization secret UI" src="_images/github-organization-secret.png" /></p>
<p>You can select which repositories to expose the secret to. Using an organization secret makes rotating
this credential easy.</p>
<p>It’s important to use a credential with minimal privileges, as
using this secret in feature-level builds that are executed before code review may open routes for
unscrupulous users to access the credential. We recommend permissioning a Dev Hub user
with the <a class="reference external" href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/dev_hub_license.htm">Limited Access - Free License</a>
to avoid exposing any other information or functionality to that user.</p>
</section>
<section id="packaging-org-and-dev-hub-auth-urls-for-package-uploads">
<h3>Packaging Org and Dev Hub Auth URLs for Package Uploads<a class="headerlink" href="#packaging-org-and-dev-hub-auth-urls-for-package-uploads" title="Link to this heading">¶</a></h3>
<p>Packaging org credentials, and Dev Hub credentials that have permissions to upload and promote package versions,
are high risk. It’s critical to ensure that these credentials are protected and cannot be exfiltrated by
malicious changes to your workflow definitions.</p>
<p>We recommend creating a GitHub Environment called <code class="docutils literal notranslate"><span class="pre">packaging</span></code> and adding the auth URL as an environment secret there.
This means that the secret will <em>not</em> be available to Actions that run against environments other than packaging.</p>
<p><img alt="image of GitHub environment setup UI for packaging" src="_images/github-environment-packaging.png" /></p>
<p>Our standard workflows for creating package versions are pre-configured to use an environment named <code class="docutils literal notranslate"><span class="pre">packaging</span></code>. If you
build your own workflows, or use an environment name other than <code class="docutils literal notranslate"><span class="pre">packaging</span></code>, include the declaration</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">packaging</span><span class="w"> </span><span class="c1"># or other name</span>
</pre></div>
</div>
<p>in your workflows that need to access this secret.</p>
<p>We recommend adding the following configurations to avoid disclosure of the packaging org secret:</p>
<ol class="arabic simple">
<li><p>Configure package-upload builds to run only on <code class="docutils literal notranslate"><span class="pre">main</span></code> (using workflow triggers).</p></li>
<li><p>Configure the <code class="docutils literal notranslate"><span class="pre">packaging</span></code> environment to be available only to builds on <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p>Configure Code Owners to identify one or more trusted staff members as owners of your <code class="docutils literal notranslate"><span class="pre">.github</span></code> directory.</p></li>
<li><p>Configure Branch Protection for <code class="docutils literal notranslate"><span class="pre">main</span></code> to require code review and Code Owners review prior to merging Pull Requests.
This ensures that rogue Actions cannot disclose this sensitive credential without being reviewed by your trusted staff members.</p></li>
</ol>
<p>If you are building a second-generation package, you can still use this pattern to protect the higher-privileged
Dev Hub credentials required to upload and promote a package. Set up a second Dev Hub user with the appropriate
permissions, and store the Dev Hub auth URL for that user in a <code class="docutils literal notranslate"><span class="pre">packaging</span></code> environment.</p>
<p><img alt="image of GitHub environment configuration for packaging" src="_images/github-organization-secret.png" /></p>
<hr class="docutils" />
<p>Environments also allow you to secure your workflow for promoting a production release.</p>
<p>You can choose to set up required reviewers on your <code class="docutils literal notranslate"><span class="pre">packaging</span></code> environment. Your approvers will then need
to sign off on all beta and production releases.</p>
<p>If you’d like beta builds to run automatically on commits to <code class="docutils literal notranslate"><span class="pre">main</span></code> <em>without</em> individual review, while
still requiring review on production releases, you can set up two environments: <code class="docutils literal notranslate"><span class="pre">packaging</span></code> and <code class="docutils literal notranslate"><span class="pre">packaging-prod</span></code>.
Configure required reviewers on <code class="docutils literal notranslate"><span class="pre">packaging-prod</span></code>, but not on <code class="docutils literal notranslate"><span class="pre">packaging</span></code>, and set the auth URL secret for your
packaging org on both environments.</p>
<p>If you use a trigger, such as modification to a specific file protected by Code Owners, to initiate production
package builds rather than a manually-initiated workflow, you may not need to use required reviewers on your
<code class="docutils literal notranslate"><span class="pre">packaging</span></code> environment at all.</p>
</section>
</section>
<section id="concurrency-protection">
<h2>Concurrency Protection<a class="headerlink" href="#concurrency-protection" title="Link to this heading">¶</a></h2>
<p>All Actions other than package uploads are safe to run in parallel, because they run against independent scratch orgs.
First-generation package uploads, however, are generally serialized.</p>
<p>In GitHub Actions, concurrency protection takes place at the level of the workflow, not the individual Action. We recommend
following the pattern shown in <code class="docutils literal notranslate"><span class="pre">cumulus-actions/standard-workflows</span></code> by ensuring that package-upload Actions are run in a job
with the key <code class="docutils literal notranslate"><span class="pre">concurrency</span></code> set to <code class="docutils literal notranslate"><span class="pre">packaging</span></code>. This ensures that GitHub Actions serializes execution of jobs against the
packaging org. Note that this concurrency setup is independent of your decisions around environment setup.</p>
</section>
<section id="deploying-to-a-production-org">
<h2>Deploying to a Production Org<a class="headerlink" href="#deploying-to-a-production-org" title="Link to this heading">¶</a></h2>
<p>We’ve chosen not to provide standard workflows or actions for deploying to a production org.
If you’re operating in an org development model, you’re likely to have specific requirements
about how production deployments take place.</p>
<p>In many cases, you’ll want to use the <code class="docutils literal notranslate"><span class="pre">deploy_unmanaged</span></code> flow or the <code class="docutils literal notranslate"><span class="pre">deploy</span></code> task.
<code class="docutils literal notranslate"><span class="pre">deploy_unmanaged</span></code> deploys metadata, but also unschedules Scheduled Apex and uninstalls
previously-deployed components that have been removed from the source
repository. If you do not want incremental component removal or Apex
unscheduling, use the <code class="docutils literal notranslate"><span class="pre">deploy</span></code> task.</p>
<p>You may also wish to compose custom flows that perform other configuration, deployments,
or setup operations on your production org.</p>
<p>Our <code class="docutils literal notranslate"><span class="pre">release-production-1gp</span></code> Action is an example of running Cumulus
automation against a production org (in that case, the packaging org). We recommend
using this Action as a model for your own deployment Actions that target Production
or long-lived sandbox orgs.</p>
</section>
<section id="building-from-scratch">
<h2>Building from Scratch<a class="headerlink" href="#building-from-scratch" title="Link to this heading">¶</a></h2>
<p>If you prefer to build your own GitHub Actions workflows for scratch, or need to
extend the capabilities in our workflow framework, you can learn more
about <a class="reference internal" href="headless.html"><span class="doc std std-doc">how CumulusCI consumes services and authenticated orgs</span></a> and how
to <a class="reference internal" href="headless.html#register-environment-services"><span class="std std-ref">Register Environment Services</span></a>.</p>
<p>If you need to use a different type of authentication, such as the JWT Flow, instead
of SFDX auth URLs, you’ll need to compose your own workflows from our supplied
primitives.</p>
</section>
<section id="running-and-reviewing-actions-workflows">
<h2>Running and Reviewing Actions Workflows<a class="headerlink" href="#running-and-reviewing-actions-workflows" title="Link to this heading">¶</a></h2>
<p><img alt="Screenshot showing a running GitHub Action workflow" src="_images/github_workflow.png" /></p>
<p>If you open a pull request for a branch that triggers a run of your Actions workflow, you
will find a section at the bottom of the pull request that shows the
results of the checks that were performed by the workflow:</p>
<p><img alt="Screenshot showing a successful check on a GitHub pull request" src="_images/github_checks.png" /></p>
<p>Some Actions are manually triggered, including our <code class="docutils literal notranslate"><span class="pre">release-production-1gp</span></code> and <code class="docutils literal notranslate"><span class="pre">release-production-2gp</span></code>
Actions, which upload a production release of a package. To run an Action manually, navigate to
the Actions tab, then select the workflow by name from the list. Click the <strong>Run workflow</strong> dropdown,
choose the appropriate branch, and click the <strong>Run workflow</strong> button to start the run.</p>
<p><img alt="Running a GitHub Action manually" src="_images/github-action-manual-trigger.png" /></p>
<p>You can set any Action as a required status on a <em>protected branch</em>, such as your <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.
This means that changes can only be merged to that branch if these Actions complete successfully.</p>
<p>See GitHub’s documentation for instructions to <a class="reference external" href="https://help.github.com/en/github/administering-a-repository/configuring-protected-branches">configure protected
branches</a>
and <a class="reference external" href="https://help.github.com/en/github/administering-a-repository/enabling-required-status-checks">enable required status
checks</a>.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://help.github.com/en/actions">GitHub Actions Documentation</a></p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="2gp-testing.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Testing with Second-Generation Packaging</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="cumulusci-flow.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">CumulusCI Flow</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Salesforce.org
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Run CumulusCI from GitHub Actions</a><ul>
<li><a class="reference internal" href="#actions-framework">Actions Framework</a><ul>
<li><a class="reference internal" href="#reusable-workflows">Reusable Workflows</a></li>
<li><a class="reference internal" href="#job-based-actions">Job-Based Actions</a></li>
<li><a class="reference internal" href="#scratch-org-base-actions">Scratch Org Base Actions</a></li>
<li><a class="reference internal" href="#primitive-actions">Primitive Actions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool-version-pinning">Tool Version Pinning</a></li>
<li><a class="reference internal" href="#environment-setup-and-org-authorization">Environment Setup and Org Authorization</a><ul>
<li><a class="reference internal" href="#dev-hub-auth-urls-for-scratch-org-builds">Dev Hub Auth URLs for Scratch Org Builds</a></li>
<li><a class="reference internal" href="#packaging-org-and-dev-hub-auth-urls-for-package-uploads">Packaging Org and Dev Hub Auth URLs for Package Uploads</a></li>
</ul>
</li>
<li><a class="reference internal" href="#concurrency-protection">Concurrency Protection</a></li>
<li><a class="reference internal" href="#deploying-to-a-production-org">Deploying to a Production Org</a></li>
<li><a class="reference internal" href="#building-from-scratch">Building from Scratch</a></li>
<li><a class="reference internal" href="#running-and-reviewing-actions-workflows">Running and Reviewing Actions Workflows</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=dac0bbfe"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>