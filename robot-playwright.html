<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="about.html" /><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Continuous Integration" href="continuous-integration.html" /><link rel="prev" title="Robot Debugger" href="robot-debugger.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Playwright Technology Preview - CumulusCI 4.6.0.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">CumulusCI 4.6.0.dev1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">CumulusCI 4.6.0.dev1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">The <code class="docutils literal notranslate"><span class="pre">cci</span></code> Command Line</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="config.html">Configure CumulusCI</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Configure CumulusCI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="deploy.html">Configure Metadata Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scratch-orgs.html">Manage Scratch Orgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="connected-orgs.html">Connect Persistent Orgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Develop a Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Automate Data Operations</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="robot.html">Acceptance Testing with Robot Framework</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Acceptance Testing with Robot Framework</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="robot-locators.html">Managing Locators</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-advanced.html">Robot Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-tutorial.html">Robot Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-debugger.html">Robot Debugger</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Playwright Technology Preview</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="continuous-integration.html">Continuous Integration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Continuous Integration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cumulusci-flow.html">CumulusCI Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="github-actions.html">Run CumulusCI from GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="2gp-testing.html">Testing with Second-Generation Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="headless.html">Run CumulusCI Headlessly</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="packaging.html">Release Managed and Unlocked Packages</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Release Managed and Unlocked Packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="managed-package.html">Release a First-Generation Managed Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="managed-2gp.html">Release a Second-Generation Managed Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="unlocked-package.html">Release an Unlocked Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="npsp-eda-2gp.html">Extend NPSP and EDA with Second-Generation Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html">Generate Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="push-upgrades.html">Manage Push Upgrades</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="unpackaged.html">Manage Unpackaged Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Manage Unpackaged Configuration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="metadata-etl.html">Metadata ETL</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="flows.html">Flow Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="env-var-reference.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="org_config-reference.html">org_config Object Reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="about.html">About CumulusCI</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of About CumulusCI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contribute to CumulusCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html">History</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/robot-playwright.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="playwright-technology-preview">
<h1>Playwright Technology Preview<a class="headerlink" href="#playwright-technology-preview" title="Link to this heading">¶</a></h1>
<p>Since its inception, CumulusCI has relied on Selenium to provide the
foundation of our browser automation keywords.</p>
<p>In 2020, Microsoft introduced a new browser automation tool named
<a class="reference external" href="https://playwright.dev/">Playwright</a>. Playwright is a ground-up
reinvention of a browser automation library that aims to address several
shortcomings of Selenium. For example, Playwright has built-in support
for waiting for elements to appear, for working with the shadow DOM,
video capture of a testing session, and so on.</p>
<p>In 2021 the Robot Framework project introduced the
<a class="reference external" href="https://robotframework-browser.org/">Browser</a> library which adds
keywords that use the Playwright API.</p>
<p>Starting with CumulusCI version 3.59.0, we are providing experimental
support for Playwright and the Browser library in CumulusCI.</p>
<p>In CumulusCI 3.60, we’ve reorganized our keywords so that a test can
import the API and performance keywords without importing Selenium
keywords. To use Playwright-based keywords, import the resource file
<a class="reference external" href="https://cumulusci.readthedocs.io/en/stable/Keywords.html#file-cumulusci/robotframework/SalesforcePlaywright.robot">SalesforcePlaywright.robot</a>,
which imports the non-Selenium keywords along with the keywords in the
<a class="reference external" href="https://cumulusci.readthedocs.io/en/stable/Keywords.html#file-cumulusci.robotframework.SalesforcePlaywright">SalesforcePlaywright
library</a>.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>We have not yet bundled Playwright and the Browser library with
CumulusCI. However, we have provided a script to make it easy to install
or uninstall Playwright and the Browser library while we continue to
work on fully supporting it.</p>
<section id="step-1-install-node-js">
<h3>Step 1: Install Node.js<a class="headerlink" href="#step-1-install-node-js" title="Link to this heading">¶</a></h3>
<p>Playwright is based on Node.js. If you don’t already have Node.js
installed, you can find a Node.js installer for your platform on the
<a class="reference external" href="https://nodejs.org/en/download/">Node.js downloads page</a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must have Node.js installed before continuing with these
instructions.</p>
</div>
</section>
<section id="step-2-run-the-playwright-installation-command">
<h3>Step 2: Run the Playwright installation command<a class="headerlink" href="#step-2-run-the-playwright-installation-command" title="Link to this heading">¶</a></h3>
<p>Installing the browser library requires a couple of manual steps, which
we’ve automated in a single script. This script does three things:</p>
<ul class="simple">
<li><p>it verifies that Node.js has been installed</p></li>
<li><p>it downloads and installs the Browser keyword library</p></li>
<li><p>it downloads and installs the Node.js modules and drivers for
playwright.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The installation of Playwright contains drivers for all supported
browsers, so there’s no need to manually install drivers such as
ChromeDriver. It works right out of the box!</p>
</div>
<p>Before you run the script, make sure your working directory is at the
root of your repository. You can then run the script with the following
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>robot<span class="w"> </span>install_playwright
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--dry_run</span></code> (or <code class="docutils literal notranslate"><span class="pre">-n</span></code>) option to see what the command
will do without actually installing.</p>
</div>
</section>
</section>
<section id="running-an-example-test">
<h2>Running an example test<a class="headerlink" href="#running-an-example-test" title="Link to this heading">¶</a></h2>
<p>As mentioned earlier, this is an experimental release of Playwright
integration, so any CumulusCI keywords that rely on Selenium won’t
work. However, the following example shows how easy it can be to write
Playwright-based tests with off-the-shelf <a class="reference external" href="https://marketsquare.github.io/robotframework-browser/Browser.html">keywords provided by the
Browser
library</a></p>
<p>To initialize Playwright support in a test suite, import the
<code class="docutils literal notranslate"><span class="pre">SalesforcePlaywright.robot</span></code> resource file as shown in the following
example. It imports the Browser library and defines the keywords
<code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">Test</span> <span class="pre">Browser</span></code> and <code class="docutils literal notranslate"><span class="pre">Delete</span> <span class="pre">records</span> <span class="pre">and</span> <span class="pre">close</span> <span class="pre">browser</span></code>.</p>
<div class="highlight-robotframework notranslate"><div class="highlight"><pre><span></span><span class="gh">*** Settings ***</span>
<span class="kn">Resource</span><span class="p">     </span><span class="nn">cumulusci/robotframework/SalesforcePlaywright.robot</span>

<span class="kn">Suite Setup</span><span class="p">      </span><span class="nf">Open test browser</span>
<span class="kn">Suite Teardown</span><span class="p">   </span><span class="nf">Delete records and close browser</span>

<span class="gh">*** Test Cases ***</span>

<span class="gu">Go to user profile</span>
<span class="p">    </span><span class="nf">Click</span><span class="p">    </span><span class="s">button:has-text(&quot;View profile&quot;)</span>
<span class="p">    </span><span class="nf">Click</span><span class="p">    </span><span class="s">.profile-card-name .profile-link-label</span>

<span class="p">    </span><span class="nf">Wait until network is idle</span>
<span class="p">    </span><span class="nf">Take screenshot</span>

<span class="gu">Go to contacts home</span>
<span class="p">    </span><span class="nf">Click</span><span class="p">            </span><span class="s">button:has-text(&quot;App Launcher&quot;)</span>
<span class="p">    </span><span class="nf">Fill text</span><span class="p">        </span><span class="s">input[placeholder=&#39;Search apps and items...&#39;]</span><span class="p">  </span><span class="s">Contacts</span>
<span class="p">    </span><span class="nf">Click</span><span class="p">            </span><span class="s">one-app-launcher-menu-item:has-text(&quot;Contacts&quot;)</span>

<span class="p">    </span><span class="nf">Wait until network is idle</span>
<span class="p">    </span><span class="nf">Take screenshot</span>
</pre></div>
</div>
<p>To run the test, save the above code in a <code class="docutils literal notranslate"><span class="pre">.robot</span> <span class="pre">file</span></code> (e.g.
<code class="docutils literal notranslate"><span class="pre">example.robot</span></code>) and then run it with the standard robot task:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>robot<span class="w"> </span>--suites<span class="w"> </span>example.robot
</pre></div>
</div>
<section id="things-to-notice">
<h3>Things to Notice<a class="headerlink" href="#things-to-notice" title="Link to this heading">¶</a></h3>
<p>This example test is unable to use any of the existing Selenium-based
keywords, except for two. We’ve created a new library based on
Playwright and the Browser library with two keywords that are similar to
existing keywords: <a class="reference external" href="https://cumulusci.readthedocs.io/en/stable/Keywords.html#SalesforcePlaywright.Open%20Test%20Browser">Open Test
Browser</a> and
<a class="reference external" href="https://cumulusci.readthedocs.io/en/stable/Keywords.html#SalesforcePlaywright.Delete%20Records%20And%20Close%20Browser">Delete Records and Close
Browser</a></p>
<p>This test also uses the Browser keyword <a class="reference external" href="https://marketsquare.github.io/robotframework-browser/Browser.html#Wait%20Until%20Network%20Is%20Idle">Wait until network is
idle</a>
before taking a screenshot. This is a keyword that waits for there to be
at least one instance of 500ms of no network traffic on the page after
it starts to load. This seems to be more reliable and easier to use
method than waiting for a page-specific element to appear.</p>
<p>This test has no explicit waits for the buttons and links that it clicks
on. The underlying Playwright engine automatically waits for elements,
so there should almost never be a need for keywords such as
<code class="docutils literal notranslate"><span class="pre">Wait</span> <span class="pre">until</span> <span class="pre">page</span> <span class="pre">contains</span> <span class="pre">element</span></code> or <code class="docutils literal notranslate"><span class="pre">Wait</span> <span class="pre">until</span> <span class="pre">element</span> <span class="pre">is</span> <span class="pre">enabled</span></code>.</p>
<p>Finally, notice how easy it is to interact with both the app menu and
the user profile. Playwright locators are often much easier to write
than Selenium locators, which translates to tests and keywords that
don’t have to be tweaked when the page markup changes.</p>
</section>
</section>
<section id="writing-keywords-in-javascript">
<h2>Writing keywords in JavaScript<a class="headerlink" href="#writing-keywords-in-javascript" title="Link to this heading">¶</a></h2>
<p>At its core, Playwright is built on Node.js, which makes it possible
to write keywords in JavaScript. This is enabled by providing the path
to a JavaScript library when the Browser library is
imported. CumulusCI comes with a small bootstrap file which will
import a Node module from your project, which itself can import any number of other
modules.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For more information about writing keywords in Javascript see <a class="reference external" href="https://marketsquare.github.io/robotframework-browser/Browser.html#Extending%20Browser%20library%20with%20a%20JavaScript%20module">Extending Browser library with a JavaScript module</a>
in the <a class="reference external" href="https://marketsquare.github.io/robotframework-browser/Browser.html">Browser library documentation</a>.</p>
</div>
<section id="creating-a-keyword-file-in-javascript">
<h3>Creating a keyword file in JavaScript<a class="headerlink" href="#creating-a-keyword-file-in-javascript" title="Link to this heading">¶</a></h3>
<p>When you import <code class="docutils literal notranslate"><span class="pre">SalesforcePlaywright.robot</span></code> into a test, it will import
the Browser library and pass it the name of a small bootstrap
JavaScript file. This bootstrap file will import the file
<code class="docutils literal notranslate"><span class="pre">robot/&lt;ProjectName&gt;/javascript/index.js</span></code>, exposing the exported
functions as keywords.</p>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<p>Who doesn’t love a good “Hello, world” example? Start by creating the
<code class="docutils literal notranslate"><span class="pre">javascript</span></code> folder in your <code class="docutils literal notranslate"><span class="pre">robot</span></code> folder. For example, if your
project is named Food-Bank, you should create a folder named
<code class="docutils literal notranslate"><span class="pre">robot/Food-Bank/javascript</span></code>.</p>
<p>In that folder, create a file named <code class="docutils literal notranslate"><span class="pre">keywords.js</span></code> with the following
content:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// keywords.js</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">hello_javascript</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;Hello, JavaScript!&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">__esModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">hello_javascript</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Browser documentation for <a class="reference external" href="https://marketsquare.github.io/robotframework-browser/Browser.html#Extending%20Browser%20library%20with%20a%20JavaScript%20module">writing keywords in javascript</a> uses async functions
in all of the examples, but async functions are not strictly required.</p>
</div>
<p>Next, create a file named <code class="docutils literal notranslate"><span class="pre">index.js</span></code> in the same folder. This file
is where you can import the <code class="docutils literal notranslate"><span class="pre">keywords.js</span></code> file and any other files
you need to import. For our simple example <code class="docutils literal notranslate"><span class="pre">index.js</span></code> should look
like the following example.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// index.js</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">__esModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;keywords.js&quot;</span><span class="p">),</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="getting-cumulusci-test-context">
<h3>Getting CumulusCI test context<a class="headerlink" href="#getting-cumulusci-test-context" title="Link to this heading">¶</a></h3>
<p>CumumlusCI comes with a node module named <code class="docutils literal notranslate"><span class="pre">cumulusci</span></code> which provides
access to information about the repository and org.</p>
<p>Let’s extend our earlier example to include a keyword for getting the
instance URL of the org under test.</p>
<p>The first step is to import the <code class="docutils literal notranslate"><span class="pre">cumulusci</span></code> module. This module
returns data that looks like the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;project_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;repo_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Food-Bank&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;repo_root&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/projects/Food-Bank&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;org&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;instance_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://something-clever.my.salesforce.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;org_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00D5C...&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can directly access these member attributes with a keyword. Edit
the <code class="docutils literal notranslate"><span class="pre">keywords.js</span></code> file to look like the following example.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">cci</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;cumulusci&quot;</span><span class="p">);</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">hello_javascript</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;Hello, Javascript!&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">get_instance_url</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">cci</span><span class="p">.</span><span class="nx">org</span><span class="p">.</span><span class="nx">instance_url</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">__esModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">hello_javascript</span><span class="p">,</span>
<span class="w">    </span><span class="nx">get_instance_url</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>This is just a preview of things to come. The CumulusCI team will be
spending more time evaluating Playwright, with an eye toward making it a
viable and more robust replacement for Selenium.</p>
</section>
<section id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://robotframework-browser.org/">Browser Library Home Page</a></p></li>
<li><p><a class="reference external" href="https://marketsquare.github.io/robotframework-browser/Browser.html">Browser Library Keyword
Documentation</a></p></li>
<li><p><a class="reference external" href="https://playwright.dev">Playwright Home Page</a></p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="continuous-integration.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Continuous Integration</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="robot-debugger.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Robot Debugger</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Salesforce.org
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Playwright Technology Preview</a><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#step-1-install-node-js">Step 1: Install Node.js</a></li>
<li><a class="reference internal" href="#step-2-run-the-playwright-installation-command">Step 2: Run the Playwright installation command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-an-example-test">Running an example test</a><ul>
<li><a class="reference internal" href="#things-to-notice">Things to Notice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-keywords-in-javascript">Writing keywords in JavaScript</a><ul>
<li><a class="reference internal" href="#creating-a-keyword-file-in-javascript">Creating a keyword file in JavaScript</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#getting-cumulusci-test-context">Getting CumulusCI test context</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#resources">Resources</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=dac0bbfe"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>