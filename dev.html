<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="about.html" /><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Automate Data Operations" href="data.html" /><link rel="prev" title="Connect Persistent Orgs" href="connected-orgs.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Develop a Project - CumulusCI 4.6.0.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">CumulusCI 4.6.0.dev1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">CumulusCI 4.6.0.dev1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">The <code class="docutils literal notranslate"><span class="pre">cci</span></code> Command Line</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="config.html">Configure CumulusCI</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Configure CumulusCI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="deploy.html">Configure Metadata Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scratch-orgs.html">Manage Scratch Orgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="connected-orgs.html">Connect Persistent Orgs</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Develop a Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Automate Data Operations</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="robot.html">Acceptance Testing with Robot Framework</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Acceptance Testing with Robot Framework</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="robot-locators.html">Managing Locators</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-advanced.html">Robot Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-tutorial.html">Robot Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-debugger.html">Robot Debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-playwright.html">Playwright Technology Preview</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="continuous-integration.html">Continuous Integration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Continuous Integration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cumulusci-flow.html">CumulusCI Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="github-actions.html">Run CumulusCI from GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="2gp-testing.html">Testing with Second-Generation Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="headless.html">Run CumulusCI Headlessly</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="packaging.html">Release Managed and Unlocked Packages</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Release Managed and Unlocked Packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="managed-package.html">Release a First-Generation Managed Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="managed-2gp.html">Release a Second-Generation Managed Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="unlocked-package.html">Release an Unlocked Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="npsp-eda-2gp.html">Extend NPSP and EDA with Second-Generation Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html">Generate Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="push-upgrades.html">Manage Push Upgrades</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="unpackaged.html">Manage Unpackaged Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Manage Unpackaged Configuration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="metadata-etl.html">Metadata ETL</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="flows.html">Flow Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="env-var-reference.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="org_config-reference.html">org_config Object Reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="about.html">About CumulusCI</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of About CumulusCI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contribute to CumulusCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html">History</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/dev.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="develop-a-project">
<h1>Develop a Project<a class="headerlink" href="#develop-a-project" title="Link to this heading">¶</a></h1>
<p>A general overview on how to develop a Salesforce project with
CumulusCI.</p>
<section id="set-up-a-dev-org">
<h2>Set Up a Dev Org<a class="headerlink" href="#set-up-a-dev-org" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dev_org</span></code> flow creates an org to develop on by moving all metadata
(managed and unmanaged) into the org, and configuring it to be ready for
development.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">cci</span> <span class="pre">flow</span> <span class="pre">info</span> <span class="pre">dev_org</span></code> for a full list of the <code class="docutils literal notranslate"><span class="pre">dev_org</span></code> flow steps.</p>
</div>
<p>To run the <code class="docutils literal notranslate"><span class="pre">dev_org</span></code> flow against the project’s
<a class="reference internal" href="scratch-orgs.html#set-a-default-org"><span class="std std-ref">default org</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>flow<span class="w"> </span>run<span class="w"> </span>dev_org
</pre></div>
</div>
<p>To run the <code class="docutils literal notranslate"><span class="pre">dev_org</span></code> flow against a specific org, use the <code class="docutils literal notranslate"><span class="pre">--org</span></code>
option. The following runs the <code class="docutils literal notranslate"><span class="pre">dev_org</span></code> flow against the org named
<code class="docutils literal notranslate"><span class="pre">dev</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>flow<span class="w"> </span>run<span class="w"> </span>dev_org<span class="w"> </span>--org<span class="w"> </span>dev
</pre></div>
</div>
<p>Open the new <code class="docutils literal notranslate"><span class="pre">dev</span></code> org to begin development.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>org<span class="w"> </span>browser<span class="w"> </span>dev
</pre></div>
</div>
</section>
<section id="list-changes">
<h2>List Changes<a class="headerlink" href="#list-changes" title="Link to this heading">¶</a></h2>
<p>To see what components have changed in a target org use the
<a class="reference internal" href="tasks.html#list-changes"><span class="std std-ref">list_changes</span></a> task:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>list_changes<span class="w"> </span>--org<span class="w"> </span>dev
</pre></div>
</div>
<div class="admonition-wizard-note admonition">
<p class="admonition-title">Wizard Note</p>
<p>This functionality relies on Salesforce’s <a class="reference external" href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_setup_enable_source_tracking_sandboxes.htm">source
tracking</a>
feature, which is currently available only in Scratch Orgs, Developer
Sandboxes, and Developer Pro Sandboxes.</p>
</div>
<p>For more information, see <a class="reference internal" href="#list-and-retrieve-options"><span class="std std-ref">List and Retrieve
Options</span></a>.</p>
</section>
<section id="retrieve-changes">
<span id="id1"></span><h2>Retrieve Changes<a class="headerlink" href="#retrieve-changes" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="tasks.html#retrieve-changes"><span class="std std-ref">retrieve_changes</span></a> task supports both
Salesforce DX and Metadata API-format source code. It utilizes the
<a class="reference external" href="https://developer.salesforce.com/docs/atlas.en-us.api_tooling.meta/api_tooling/tooling_api_objects_sourcemember.htm">SourceMember</a>
<code class="docutils literal notranslate"><span class="pre">sObject</span></code> to detect what has changed in an org, and also gives you
discretion regarding which components are retrieved.</p>
<p>To retrieve <em>all</em> changes in an org:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>retrieve_changes<span class="w"> </span>--org<span class="w"> </span>dev
</pre></div>
</div>
<p>For information on retrieving specific subsets of changes, see <a class="reference internal" href="#list-and-retrieve-options"><span class="std std-ref">List and
Retrieve Options</span></a>.</p>
<section id="path">
<h3><code class="docutils literal notranslate"><span class="pre">--path</span></code><a class="headerlink" href="#path" title="Link to this heading">¶</a></h3>
<p>Manual tracking of component versions offers the possibility of
retrieving one set of changes into directory A, and retrieving a
different set of changes into directory B. By default, changes are
retrieved into the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory when using Metadata API source
format, or the default package directory (<code class="docutils literal notranslate"><span class="pre">force-app</span></code>) when using
Salesforce DX source format.</p>
<p>To retrieve metadata into a <em>different</em> location use the <code class="docutils literal notranslate"><span class="pre">--path</span></code>
option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>retrieve_changes<span class="w"> </span>--org<span class="w"> </span>dev<span class="w"> </span>--path<span class="w"> </span>your/unique/path
</pre></div>
</div>
</section>
</section>
<section id="list-and-retrieve-options">
<span id="id2"></span><h2>List and Retrieve Options<a class="headerlink" href="#list-and-retrieve-options" title="Link to this heading">¶</a></h2>
<p>When developing in an org, the changes you’re most interested in are
sometimes mixed with other changes that aren’t relevant to what you’re
doing.</p>
<p>For example, changing metadata like Custom Objects and Custom Fields
often results in changes to Page Layouts and Profiles that you don’t
wish to review or retrieve.</p>
<p>It’s a common workflow in CumulusCI to use the <code class="docutils literal notranslate"><span class="pre">list_changes</span></code> task,
combined with the options featured in this subsection, to narrow the
scope of changes in the org to the exact elements you desire to retrieve
in your project. When the correct set of metadata is listed, run the
<code class="docutils literal notranslate"><span class="pre">retrieve_changes</span></code> task to bring those changes into the repository.</p>
<section id="include-exclude">
<h3><code class="docutils literal notranslate"><span class="pre">--include</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">--exclude</span></code><a class="headerlink" href="#include-exclude" title="Link to this heading">¶</a></h3>
<p>When retrieving metadata from an org, CumulusCI represents each
component name as the combination of its type (such as a <code class="docutils literal notranslate"><span class="pre">Profile</span></code>,
<code class="docutils literal notranslate"><span class="pre">CustomObject</span></code>, or <code class="docutils literal notranslate"><span class="pre">ApexClass</span></code>) and its API name:
<code class="docutils literal notranslate"><span class="pre">MemberType:</span> <span class="pre">MemberName</span></code>. An <code class="docutils literal notranslate"><span class="pre">ApexClass</span></code> named <code class="docutils literal notranslate"><span class="pre">MyTestClass</span></code> would be
represented as <code class="docutils literal notranslate"><span class="pre">ApexClass:</span> <span class="pre">MyTestClass</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--include</span></code> and <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> options lets you pass multiple <a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">regular
expressions</a> to match
against the names of changed components. This metadata is either
included or excluded depending on which option the regular expression is
passed. Multiple regular expressions can be passed in a comma-separated
list.</p>
<p>The following lists all modified metadata that ends in “Test” and
“Data” in the default org.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>list_changes<span class="w"> </span>--include<span class="w"> </span><span class="s2">&quot;Test</span>$<span class="s2">,Data</span>$<span class="s2">&quot;</span>
</pre></div>
</div>
<p>Since the metadata string that CumulusCI processes also includes the
<code class="docutils literal notranslate"><span class="pre">MemberType</span></code>, use exclusions and inclusions that filter whole types of
metadata.</p>
<p>The following will list all changes <em>except for</em> those with a type of
<code class="docutils literal notranslate"><span class="pre">Profile</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>list_changes<span class="w"> </span>--exclude<span class="w"> </span><span class="s2">&quot;^Profile: &quot;</span>
</pre></div>
</div>
</section>
<section id="types">
<h3><code class="docutils literal notranslate"><span class="pre">--types</span></code><a class="headerlink" href="#types" title="Link to this heading">¶</a></h3>
<p>To list or retrieve changed metadata of the same type, use the <code class="docutils literal notranslate"><span class="pre">--types</span></code>
option along with the <a class="reference external" href="https://developer.salesforce.com/docs/atlas.en-us.api_meta.meta/api_meta/meta_types_list.htm">metadata
type</a>
to retrieve.</p>
<p>The following retrieves all changed <code class="docutils literal notranslate"><span class="pre">ApexClass</span></code> and <code class="docutils literal notranslate"><span class="pre">ApexComponent</span></code>
entities in the default org.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>retrieve_changes<span class="w"> </span>--types<span class="w"> </span>ApexClass,ApexComponent
</pre></div>
</div>
</section>
</section>
<section id="push-changes">
<h2>Push Changes<a class="headerlink" href="#push-changes" title="Link to this heading">¶</a></h2>
<p>Developers often use an editor or IDE like Visual Studio Code to modify
code and metadata stored in the repository. After making changes in an
editor, push these changes from your project’s local repository to the
target org.</p>
<p>To push your changes, use the
<a class="reference internal" href="deploy.html#configure-metadata-deployment"><span class="std std-ref">deploy</span></a> task:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>deploy
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">deploy</span></code> task has <em>many</em> options for handling a number of different
scenarios. For a comprehensive list of options, see the
<a class="reference internal" href="deploy.html#configure-metadata-deployment"><span class="std std-ref">deploy</span></a> task reference.</p>
</section>
<section id="run-apex-tests">
<h2>Run Apex Tests<a class="headerlink" href="#run-apex-tests" title="Link to this heading">¶</a></h2>
<p>CumulusCI can execute Apex tests in an org with the <code class="docutils literal notranslate"><span class="pre">run_tests</span></code> task,
and optionally report on test outcomes and code coverage. Failed tests
can also be retried automatically.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>run_tests<span class="w"> </span>--org<span class="w"> </span>&lt;org_name&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">run_tests</span></code> task has <em>many</em> options for running tests. For a
comprehensive list of options and examples, see the
<a class="reference internal" href="tasks.html#run-tests"><span class="std std-ref">run_tests</span></a> task reference.</p>
</section>
<section id="set-up-a-qa-org">
<h2>Set Up a QA Org<a class="headerlink" href="#set-up-a-qa-org" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">qa_org</span></code> flow sets up org environments where quality engineers test
features quickly and easily. <code class="docutils literal notranslate"><span class="pre">qa_org</span></code> runs the specialized <code class="docutils literal notranslate"><span class="pre">config_qa</span></code>
flow after deploying the project’s unmanaged metadata to the org.</p>
<p>The following runs the <code class="docutils literal notranslate"><span class="pre">qa_org</span></code> flow against the <code class="docutils literal notranslate"><span class="pre">qa</span></code> org.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>flow<span class="w"> </span>run<span class="w"> </span>qa_org<span class="w"> </span>--org<span class="w"> </span>qa
</pre></div>
</div>
<section id="create-qa-configurations">
<h3>Create QA Configurations<a class="headerlink" href="#create-qa-configurations" title="Link to this heading">¶</a></h3>
<p>Out of the box, and even in some active projects, the <code class="docutils literal notranslate"><span class="pre">config_dev</span></code> and
<code class="docutils literal notranslate"><span class="pre">config_qa</span></code> flows are the same. Many teams have a requirement for
additional configurations to be deployed when performing QA, but not
when developing a new feature.</p>
<p>At Salesforce.org, our product teams often modify the <code class="docutils literal notranslate"><span class="pre">config_qa</span></code> flow
to deploy configurations that pertain to large optional features in a
package. These configurations are subsequently tested by the product’s
Robot Framework test suites.</p>
<p>To retrieve your own QA configurations, spin up a new org:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cci flow run qa_org
</pre></div>
</div>
<p>Make the necessary changes, and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cci task run retrieve_qa_config
</pre></div>
</div>
<p>This task defaults to retrieving this metadata under
<code class="docutils literal notranslate"><span class="pre">unpackaged/config/qa</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The configuration metadata can also be stored in a different location by
using the <code class="docutils literal notranslate"><span class="pre">--path</span></code> option.</p>
</div>
<p>To delete the org…</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>org<span class="w"> </span>remove<span class="w"> </span>qa
</pre></div>
</div>
<p>Then re-create it…</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>flow<span class="w"> </span>run<span class="w"> </span>qa_org<span class="w"> </span>--org<span class="w"> </span>qa
</pre></div>
</div>
<p>Then run the <code class="docutils literal notranslate"><span class="pre">deploy_qa_config</span></code> to deploy the previously retrieved
configurations to the org.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>deploy_qa_config<span class="w"> </span>--org<span class="w"> </span>qa
</pre></div>
</div>
<p>To require that the <code class="docutils literal notranslate"><span class="pre">qa_org</span></code> flow always runs this task, add a
<code class="docutils literal notranslate"><span class="pre">deploy_qa_config</span></code> task step under the <code class="docutils literal notranslate"><span class="pre">flows__config_qa</span></code> section of the
<code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config_qa</span><span class="p">:</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="nt">3</span><span class="p">:</span>
<span class="w">            </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy_qa_config</span>
</pre></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">config_qa</span></code> (which is included in the <code class="docutils literal notranslate"><span class="pre">qa_org</span></code> flow) executes the
<code class="docutils literal notranslate"><span class="pre">deploy_qa_config</span></code> task as the third step in the flow.</p>
</section>
</section>
<section id="manage-dependencies">
<h2>Manage Dependencies<a class="headerlink" href="#manage-dependencies" title="Link to this heading">¶</a></h2>
<p>CumulusCI is built to automate the complexities of dependency management
for projects that extend, customize, or compose other projects. CumulusCI
currently handles these main types of dependencies for projects.</p>
<ul class="simple">
<li><p><strong>GitHub Repository</strong>: Dynamically resolve a product release, and
its own dependencies, from a CumulusCI project on GitHub.</p></li>
<li><p><strong>Packages</strong>: Require a specific version of a managed package or
unlocked package.</p></li>
<li><p><strong>Unmanaged Metadata</strong>: Require the deployment of unmanaged
metadata.</p></li>
</ul>
<p>Dependencies are listed in the <code class="docutils literal notranslate"><span class="pre">project__dependencies</span></code> section of
<code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">update_dependencies</span></code> task handles deploying dependencies to a
target org, and is included in all flows designed to deploy or install
to an org, such as <code class="docutils literal notranslate"><span class="pre">dev_org</span></code>, <code class="docutils literal notranslate"><span class="pre">qa_org</span></code>, <code class="docutils literal notranslate"><span class="pre">install_prod</span></code>, and others.</p>
<p>To run the <code class="docutils literal notranslate"><span class="pre">update_dependencies</span></code> task manually:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cci<span class="w"> </span>task<span class="w"> </span>run<span class="w"> </span>update_dependencies
</pre></div>
</div>
<section id="github-repository-dependencies">
<h3>GitHub Repository Dependencies<a class="headerlink" href="#github-repository-dependencies" title="Link to this heading">¶</a></h3>
<p>GitHub repository dependencies create a dynamic dependency between the
current project and another CumulusCI project on GitHub. This is an
example of listing Salesforce.org’s
<a class="reference external" href="https://github.com/SalesforceFoundation/EDA">EDA</a> product as a
dependency.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/EDA</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">update_dependencies</span></code> runs, these steps are taken against the
referenced repository.</p>
<ul>
<li><p>Look for the <code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> file and parse if found.</p></li>
<li><p>Determine if the project has subfolders under <code class="docutils literal notranslate"><span class="pre">unpackaged/pre</span></code>. If
found, deploy them first, in alphabetical order.</p></li>
<li><p>Determine if the project specifies any dependencies in the
<code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> file. If found, recursively resolve those
dependencies and any dependencies belonging to them.</p></li>
<li><p>Determine whether to install the project as as a managed package or unmanaged metadata:</p>
<p>: - If the project has a namespace configured in the
<code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> file, treat the project as a managed package
unless the <code class="docutils literal notranslate"><span class="pre">unmanaged</span></code> option is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> in the
dependency. - If the project has a namespace and is <em>not</em> configured as
unmanaged, use the GitHub API to locate the latest managed
release of the project and install it.</p>
</li>
<li><p>If the project is an unmanaged dependency, the main source directory
is deployed as unmanaged metadata.</p></li>
<li><p>Determine if the project has subfolders under <code class="docutils literal notranslate"><span class="pre">unpackaged/post</span></code>. If
found, deploy them next, in alphabetical order. Namespace tokens are
replaced with <code class="docutils literal notranslate"><span class="pre">&lt;namespace&gt;__</span></code> if the project is being installed as a
managed package, or an empty string otherwise.</p></li>
</ul>
<section id="reference-unmanaged-projects">
<h4>Reference Unmanaged Projects<a class="headerlink" href="#reference-unmanaged-projects" title="Link to this heading">¶</a></h4>
<p>If the referenced repository does not have a namespace configured, or if
the dependency specifies the <code class="docutils literal notranslate"><span class="pre">unmanaged</span></code> option as <code class="docutils literal notranslate"><span class="pre">True</span></code>, the
repository is treated as unmanaged.</p>
<p>Here is a project with Salesforce.org’s
<a class="reference external" href="https://github.com/SalesforceFoundation/EDA">EDA</a> package listed as an
unmanaged dependency:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/EDA</span>
<span class="w">          </span><span class="nt">unmanaged</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>The EDA repository is configured for a namespace, but the dependency
specifies <code class="docutils literal notranslate"><span class="pre">unmanaged:</span> <span class="pre">True</span></code>, so EDA deploys as unmanaged metadata.</p>
<p>CumulusCI only supports unmanaged repositories in Metadata API source
format at present.</p>
</section>
<section id="reference-a-specific-tag">
<h4>Reference a Specific Tag<a class="headerlink" href="#reference-a-specific-tag" title="Link to this heading">¶</a></h4>
<p>To reference a specific version of the product other than the most
recent commit on the main branch (for unmanaged projects) or the most
recent production release (for managed packages), use the <code class="docutils literal notranslate"><span class="pre">tag</span></code> option
to specify a tag from the target repository. This option is useful for
testing against specific package versions, pinning a dependency to a
version rather than using the latest release, and recreating org
environments for debugging.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/EDA</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/1.105</span>
</pre></div>
</div>
<p>The EDA repository’s tag <code class="docutils literal notranslate"><span class="pre">rel/1.105</span></code> is used instead of the latest
production release of EDA (1.111, for this example).</p>
</section>
<section id="skip-unpackaged-in-reference-repositories">
<h4>Skip <code class="docutils literal notranslate"><span class="pre">unpackaged/*</span></code> in Reference Repositories<a class="headerlink" href="#skip-unpackaged-in-reference-repositories" title="Link to this heading">¶</a></h4>
<p>If the referenced repository has unpackaged metadata under
<code class="docutils literal notranslate"><span class="pre">unpackaged/pre</span></code> or <code class="docutils literal notranslate"><span class="pre">unpackaged/post</span></code>, use the <code class="docutils literal notranslate"><span class="pre">skip</span></code> option to skip
deploying that metadata with the dependency.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/EDA</span>
<span class="w">          </span><span class="nt">skip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unpackaged/post/course_connection_record_types</span>
</pre></div>
</div>
</section>
</section>
<section id="package-dependencies">
<h3>Package Dependencies<a class="headerlink" href="#package-dependencies" title="Link to this heading">¶</a></h3>
<p>Managed package and unlocked package dependencies are rather simple.
Under the <code class="docutils literal notranslate"><span class="pre">project__dependencies</span></code> section of the <code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> file,
specify the namespace of the target package, and the required version
number, or specify the package version id.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npe01</span>
<span class="w">          </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.6</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">version_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">04t000000000001</span>
</pre></div>
</div>
<p>Package dependencies can include any package, whether or not it is built
as a CumulusCI project. Dependencies on managed packages may be
specified using the namespace and version or the version id.
Dependencies on unlocked packages should use the version id.</p>
</section>
<section id="package-install-keys-passwords">
<h3>Package Install Keys (Passwords)<a class="headerlink" href="#package-install-keys-passwords" title="Link to this heading">¶</a></h3>
<p>Some packages are protected by an install key, which must be present in
order to install the package. CumulusCI dependencies can use the
<code class="docutils literal notranslate"><span class="pre">password_env_name</span></code> key to instruct CumulusCI to retrieve the package
install key from an environment variable. This key is available on both
package version dependencies and on GitHub dependencies:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_namespace</span>
<span class="w">          </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.6</span>
<span class="w">          </span><span class="nt">password_env_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INSTALL_KEY</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/MyOrg/MyRepo</span>
<span class="w">          </span><span class="nt">password_env_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MY_REPO_KEY</span>
</pre></div>
</div>
</section>
<section id="unmanaged-metadata-dependencies">
<h3>Unmanaged Metadata Dependencies<a class="headerlink" href="#unmanaged-metadata-dependencies" title="Link to this heading">¶</a></h3>
<p>Specify unmanaged metadata to be deployed by specifying a <code class="docutils literal notranslate"><span class="pre">zip_url</span></code> or a
<code class="docutils literal notranslate"><span class="pre">github</span></code> URL, and, optionally, <code class="docutils literal notranslate"><span class="pre">subfolder</span></code>, <code class="docutils literal notranslate"><span class="pre">namespace_inject</span></code>,
<code class="docutils literal notranslate"><span class="pre">namespace_strip</span></code>, and <code class="docutils literal notranslate"><span class="pre">unmanaged</span></code> under the <code class="docutils literal notranslate"><span class="pre">project__dependencies</span></code>
section of the cumulusci.yml file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">zip_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://SOME_HOST/metadata.zip</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/EDA</span>
<span class="w">          </span><span class="nt">subfolder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unpackaged/post/course_connection_record_types</span>
<span class="w">          </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0cabfe</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">update_dependencies</span></code> task runs, it downloads the zip file or
GitHub subdirectory and deploys it via the Metadata API. The zip file
must contain valid metadata for use with a deploy, including a
<code class="docutils literal notranslate"><span class="pre">package.xml</span></code> file in the root.</p>
<p>Unmanaged metadata dependencies from GitHub may optionally specify the
<code class="docutils literal notranslate"><span class="pre">ref</span></code> to download. If they do not, unmanaged GitHub dependencies are
resolved like other GitHub references. See <a class="reference internal" href="#controlling-github-dependency-resolution"><span class="std std-ref">Controlling GitHub
Dependency Resolution</span></a> for
more details on resolution of dynamic dependencies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In versions of CumulusCI prior to 3.33.0, unmanaged GitHub dependencies
always deployed the most recent commit on the default branch.</p>
</div>
<section id="specify-a-subfolder">
<h4>Specify a Subfolder<a class="headerlink" href="#specify-a-subfolder" title="Link to this heading">¶</a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">subfolder</span></code> option to specify a subfolder of the zip file or
GitHub repository to use for the deployment.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This option is handy when referring to metadata stored in a GitHub
repository.</p>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">update_dependencies</span></code> runs, it still downloads the zip from
<code class="docutils literal notranslate"><span class="pre">zip_url</span></code>, but then builds a new zip containing only the content of
<code class="docutils literal notranslate"><span class="pre">subfolder</span></code>, starting inside <code class="docutils literal notranslate"><span class="pre">subfolder</span></code> as the zip’s root.</p>
</section>
<section id="inject-namespace-prefixes">
<h4>Inject Namespace Prefixes<a class="headerlink" href="#inject-namespace-prefixes" title="Link to this heading">¶</a></h4>
<p>CumulusCI has support for tokenizing references to a package’s
namespace prefix in code. When tokenized, all occurrences of the
namespace prefix, are replaced with <code class="docutils literal notranslate"><span class="pre">%%%NAMESPACE%%%</span></code> inside of files
and <code class="docutils literal notranslate"><span class="pre">___NAMESPACE___</span></code> in file names. The <code class="docutils literal notranslate"><span class="pre">namespace_inject</span></code> option
instructs CumulusCI to replace these tokens with the specified namespace
before deploying the unpackaged dependency.</p>
<p>For more on this topic see <a class="reference internal" href="unpackaged.html#namespace-injection"><span class="std std-ref">Namespace Injection</span></a>.</p>
</section>
</section>
<section id="pinning-github-dependencies">
<span id="id3"></span><h3>Pinning GitHub Dependencies<a class="headerlink" href="#pinning-github-dependencies" title="Link to this heading">¶</a></h3>
<p>By default, CumulusCI resolves dynamic GitHub dependencies to the latest
available releases. In some cases, this may be undesirable. You can use
dependency pinning to control how dependencies are resolved, including
transitive dependencies referenced by your own direct dependencies.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">project__dependency_pins</span></code> section of your <code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code> to
establish pins. Each pin includes the keys <code class="docutils literal notranslate"><span class="pre">github</span></code>, which must match
the URL of the repo you wish to pin, and a <code class="docutils literal notranslate"><span class="pre">tag</span></code> to which you wish to
pin the dependency. Here’s an example that pins NPSP and its transitive
dependencies to specific versions:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/NPSP</span>
<span class="w">    </span><span class="nt">dependency_pins</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/NPSP</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.219</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/Contacts_and_Organizations</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.19</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/Households</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.16</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/Recurring_Donations</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.22</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/Relationships</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.12</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/Affiliations</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.10</span>
</pre></div>
</div>
<p>Pins affect resolution of managed package versions and any unmanaged dependencies
included in the target repositories.</p>
<p>If CumulusCI encounters a conflict with an existing tag or other specifier
while attempting to pin dependencies, like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/NPSP</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.220</span>
<span class="w">    </span><span class="nt">dependency_pins</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">github</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/SalesforceFoundation/NPSP</span>
<span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rel/3.219</span>
</pre></div>
</div>
<p>it will stop and require you to resolve the conflict by removing either the pin
or the dependency specification.</p>
<p>We recommend using pins only when referencing external products whose development
process or release schedule you do not control, such as NPSP and EDA.
In most cases, it’s preferable for dependencies within a product suite to remain
unpinned to support ongoing development.</p>
</section>
<section id="controlling-github-dependency-resolution">
<span id="id4"></span><h3>Controlling GitHub Dependency Resolution<a class="headerlink" href="#controlling-github-dependency-resolution" title="Link to this heading">¶</a></h3>
<p>CumulusCI converts dynamic dependencies specified via GitHub
repositories into specific package versions and commit references by
applying one or more <em>resolvers</em>. You can customize the resolvers that
CumulusCI applies to control when it will use beta managed packages or
second-generation feature test packages, or to intervene more deeply in
the dependency resolution process.</p>
<p>CumulusCI organizes resolvers into <em>resolution strategies</em>, which are
named, ordered lists of resolvers to apply. When CumulusCI applies a
resolution strategy to a dependency, it applies each resolver from top
to bottom until a resolver succeeds in resolving the dependency.</p>
<p>Four resolution strategies are provided in the CumulusCI standard
library:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">latest_release</span></code>, which will attempt to resolve to the latest
managed release of a managed package project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include_beta</span></code>, which will attempt to resolve to the latest beta,
if any, or managed release of a managed package project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">commit_status</span></code>, which will resolve to second-generation package
betas created on feature branches, if any, or the main branch,
before falling back to managed package releases. This strategy
is used only in the <code class="docutils literal notranslate"><span class="pre">qa_org_2gp</span></code> and <code class="docutils literal notranslate"><span class="pre">ci_feature_2gp</span></code> flows.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unlocked</span></code>, which will resolve to unlocked package betas
created on feature branches, if any, or the main branch.
This strategy does <em>not</em> fall back to managed package releases,
and is used in the <code class="docutils literal notranslate"><span class="pre">qa_org_unlocked</span></code> flow.
The complete list of steps taken by each resolution strategy is given
below.</p></li>
</ul>
</div></blockquote>
<p>Each flow that resolves dependencies selects a resolution strategy that
meets its needs. Two aliases, <code class="docutils literal notranslate"><span class="pre">production</span></code>, and <code class="docutils literal notranslate"><span class="pre">preproduction</span></code>, are
defined for this purpose, because in many cases a development flow like
<code class="docutils literal notranslate"><span class="pre">dev_org</span></code> or <code class="docutils literal notranslate"><span class="pre">install_beta</span></code> will want to utilize a <em>different</em>
resolution strategy than a production flow like <code class="docutils literal notranslate"><span class="pre">ci_master</span></code> or
<code class="docutils literal notranslate"><span class="pre">install_prod</span></code>.</p>
<p>By default, both <code class="docutils literal notranslate"><span class="pre">production</span></code> and <code class="docutils literal notranslate"><span class="pre">preproduction</span></code> use the
<code class="docutils literal notranslate"><span class="pre">latest_release</span></code> resolution strategy. To opt to have development flows
use beta versions of managed package dependencies, you can switch the
<code class="docutils literal notranslate"><span class="pre">preproduction</span></code> alias to point to the <code class="docutils literal notranslate"><span class="pre">include_beta</span></code> resolution
strategy:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>project:
    dependency_resolutions:
        preproduction: include_beta
        production: latest_release
</pre></div>
</div>
<p>After this change, flows like <code class="docutils literal notranslate"><span class="pre">dev_org</span></code> will install beta releases of
dependencies, if present.</p>
<section id="resolution-strategy-details">
<h4>Resolution Strategy Details<a class="headerlink" href="#resolution-strategy-details" title="Link to this heading">¶</a></h4>
<p>The standard resolution strategies execute the following steps to
resolve a dependency:</p>
<p><strong>latest_release</strong>:</p>
<p>This resolution strategy is suitable for any build for products that
wish to consume production releases of their dependencies during
development and testing. It is also suitable for production flows (such
as <code class="docutils literal notranslate"><span class="pre">install_prod</span></code> or a MetaDeploy installer flow) for all products.</p>
<ul class="simple">
<li><p>If a <code class="docutils literal notranslate"><span class="pre">tag</span></code> is present, use the commit for that tag, and any package
version found there. (Resolver: <code class="docutils literal notranslate"><span class="pre">tag</span></code>)</p></li>
<li><p>Identify the most recent production package release via the GitHub
Releases section. If located, use that package and commit.
(Resolver: <code class="docutils literal notranslate"><span class="pre">latest_release</span></code>)</p></li>
<li><p>Use the most recent commit on the repository’s main branch as an
unmanaged dependency. (Resolver: <code class="docutils literal notranslate"><span class="pre">unmanaged</span></code>)</p></li>
</ul>
<p><strong>include_beta</strong>:</p>
<p>This resolution strategy is suitable for any pre-production build for
products that wish to consume beta releases of their dependencies during
development and testing.</p>
<ul class="simple">
<li><p>If a <code class="docutils literal notranslate"><span class="pre">tag</span></code> is present, use the commit for that tag, and any package
version found there. (Resolver: <code class="docutils literal notranslate"><span class="pre">tag</span></code>)</p></li>
<li><p>Identify the most recent beta package release via the GitHub
Releases section. If located, use that package and commit.
(Resolver: <code class="docutils literal notranslate"><span class="pre">latest_beta</span></code>)</p></li>
<li><p>Identify the most recent production package release via the GitHub
Releases section. If located, use that package and commit.
(Resolver: <code class="docutils literal notranslate"><span class="pre">latest_release</span></code>)</p></li>
<li><p>Use the most recent commit on the repository’s main branch as an
unmanaged dependency. (Resolver: <code class="docutils literal notranslate"><span class="pre">unmanaged</span></code>)</p></li>
</ul>
<p><strong>commit_status</strong>:</p>
<p>This resolution strategy is suitable for feature builds on products that
utilize a release branch model and build second-generation package betas
(using the <code class="docutils literal notranslate"><span class="pre">build_feature_test_package</span></code> flow) on each commit.</p>
<blockquote>
<div><ul class="simple">
<li><p>If a <code class="docutils literal notranslate"><span class="pre">tag</span></code> is present, use the commit for that tag, and any
package version found there. (Resolver: <code class="docutils literal notranslate"><span class="pre">tag</span></code>)</p></li>
<li><p>If the current branch is a release branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>, where
<code class="docutils literal notranslate"><span class="pre">feature/</span></code> is the feature branch prefix and <code class="docutils literal notranslate"><span class="pre">NNN</span></code> is any integer)
or a child branch of a release branch, locate a branch with the
same name in the dependency repository. If a commit status
contains a beta package Id for any of the first five commits on
that branch, use that commit and package. (Resolver:
<code class="docutils literal notranslate"><span class="pre">commit_status_exact_branch</span></code>)</p></li>
<li><p>If the current branch is a release branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>, where
<code class="docutils literal notranslate"><span class="pre">feature/</span></code> is the feature branch prefix and <code class="docutils literal notranslate"><span class="pre">NNN</span></code> is any integer)
or a child branch of a release branch, locate a matching release
branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>) in the dependency repository. If a commit
status contains a beta package Id for any of the first five
commits on that branch, use that commit and package. (Resolver:
<code class="docutils literal notranslate"><span class="pre">commit_status_release_branch</span></code>)</p></li>
<li><p>If the current branch is a release branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>, where
<code class="docutils literal notranslate"><span class="pre">feature/</span></code> is the feature branch prefix and <code class="docutils literal notranslate"><span class="pre">NNN</span></code> is any integer)
or a child branch of a release branch, locate a branch for either
of the two previous releases (e.g., <code class="docutils literal notranslate"><span class="pre">feature/230</span></code> in this
repository would search <code class="docutils literal notranslate"><span class="pre">feature/229</span></code> and <code class="docutils literal notranslate"><span class="pre">feature/228</span></code>) in the
dependency repository. If a commit status contains a beta package
Id for any of the first five commits on that branch, use that
commit and package. (Resolver:
<code class="docutils literal notranslate"><span class="pre">commit_status_previous_release_branch</span></code>)</p></li>
<li><p>If a commit status contains a beta package Id for any of the first
five commits on the default branch, use that commit and package.
(Resolver: <code class="docutils literal notranslate"><span class="pre">commit_status_default_branch</span></code>)</p></li>
<li><p>Identify the most recent beta package release via the GitHub
Releases section. If located, use that package and commit.
(Resolver: <code class="docutils literal notranslate"><span class="pre">latest_beta</span></code>)</p></li>
<li><p>Identify the most recent production package release via the GitHub
Releases section. If located, use that package and commit.
(Resolver: <code class="docutils literal notranslate"><span class="pre">latest_release</span></code>)</p></li>
<li><p>Use the most recent commit on the repository’s main branch as an
unmanaged dependency. (Resolver: <code class="docutils literal notranslate"><span class="pre">unmanaged</span></code>)</p></li>
</ul>
</div></blockquote>
<p><strong>unlocked</strong>:</p>
<p>This resolution strategy is suitable for feature builds on products that
utilize a release branch model and build unlocked package betas
(using the <code class="docutils literal notranslate"><span class="pre">build_unlocked_test_package</span></code> flow) on each commit. It is
also suitable for use cases where a persistent org and Unlocked
Package versions are used for ongoing QA.</p>
<blockquote>
<div><ul class="simple">
<li><p>If the current branch is a release branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>, where
<code class="docutils literal notranslate"><span class="pre">feature/</span></code> is the feature branch prefix and <code class="docutils literal notranslate"><span class="pre">NNN</span></code> is any integer)
or a child branch of a release branch, locate a branch with the
same name in the dependency repository. If a commit status
contains a beta package Id for any of the first five commits on
that branch, use that commit and package. (Resolver:
<code class="docutils literal notranslate"><span class="pre">unlocked_exact_branch</span></code>)</p></li>
<li><p>If the current branch is a release branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>, where
<code class="docutils literal notranslate"><span class="pre">feature/</span></code> is the feature branch prefix and <code class="docutils literal notranslate"><span class="pre">NNN</span></code> is any integer)
or a child branch of a release branch, locate a matching release
branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>) in the dependency repository. If a commit
status contains a beta package Id for any of the first five
commits on that branch, use that commit and package. (Resolver:
<code class="docutils literal notranslate"><span class="pre">unlocked_release_branch</span></code>)</p></li>
<li><p>If the current branch is a release branch (<code class="docutils literal notranslate"><span class="pre">feature/NNN</span></code>, where
<code class="docutils literal notranslate"><span class="pre">feature/</span></code> is the feature branch prefix and <code class="docutils literal notranslate"><span class="pre">NNN</span></code> is any integer)
or a child branch of a release branch, locate a branch for either
of the two previous releases (e.g., <code class="docutils literal notranslate"><span class="pre">feature/230</span></code> in this
repository would search <code class="docutils literal notranslate"><span class="pre">feature/229</span></code> and <code class="docutils literal notranslate"><span class="pre">feature/228</span></code>) in the
dependency repository. If a commit status contains a beta package
Id for any of the first five commits on that branch, use that
commit and package. (Resolver:
<code class="docutils literal notranslate"><span class="pre">unlocked_previous_release_branch</span></code>)</p></li>
<li><p>If a commit status contains a beta package Id for any of the first
five commits on the default branch, use that commit and package.
(Resolver: <code class="docutils literal notranslate"><span class="pre">unlocked_default_branch</span></code>)</p></li>
</ul>
</div></blockquote>
</section>
<section id="customizing-resolution-strategies">
<h4>Customizing Resolution Strategies<a class="headerlink" href="#customizing-resolution-strategies" title="Link to this heading">¶</a></h4>
<p>Projects that require deep control of how dependencies are resolved can
create custom resolution strategies.</p>
<p>To add a resolution strategy, add a list of the resolvers desired to the
section <code class="docutils literal notranslate"><span class="pre">project__dependency_resolutions__resolution_strategies</span></code> in
<code class="docutils literal notranslate"><span class="pre">cumulusci.yml</span></code>. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dependency_resolutions:
    production: releases_only
    resolution_strategies:
        releases_only:
            - latest_release
</pre></div>
</div>
<p>would create a new resolution strategy called <code class="docutils literal notranslate"><span class="pre">releases_only</span></code> that
<em>only</em> can resolve to a production release. (Dependencies without a
production release would cause a failure). It also assigns the alias
<code class="docutils literal notranslate"><span class="pre">production</span></code> to point to <code class="docutils literal notranslate"><span class="pre">releases_only</span></code>, meaning that standard flows
like <code class="docutils literal notranslate"><span class="pre">install_prod</span></code> would use this resolution strategy.</p>
<p>Customizing resolution strategies is an advanced topic. The
out-of-the-box resolution strategies provided with CumulusCI will cover
the needs of most projects. However, this capability is available for
projects that need it.</p>
</section>
</section>
<section id="automatic-cleaning-of-meta-xml-files-on-deploy">
<h3>Automatic Cleaning of <code class="docutils literal notranslate"><span class="pre">meta.xml</span></code> Files on Deploy<a class="headerlink" href="#automatic-cleaning-of-meta-xml-files-on-deploy" title="Link to this heading">¶</a></h3>
<p>To let CumulusCI fully manage the project’s dependencies, the <code class="docutils literal notranslate"><span class="pre">deploy</span></code>
task (and other tasks based on <code class="docutils literal notranslate"><span class="pre">cumulusci.tasks.salesforce.Deploy</span></code>, or
subclasses of it) automatically removes the <code class="docutils literal notranslate"><span class="pre">&lt;packageVersion&gt;</span></code> element
and its children from all <code class="docutils literal notranslate"><span class="pre">meta.xml</span></code> files in the deployed metadata.
Removing these elements does not affect the files on the filesystem.</p>
<p>This feature supports CumulusCI’s automatic dependency resolution by
avoiding a need for projects to manually update XML files to reflect
current dependency package versions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the metadata being deployed references namespaced metadata that does
not exist in the currently installed package, the deployment throws an
error as expected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The automatic cleaning of <code class="docutils literal notranslate"><span class="pre">meta.xml</span></code> files can be disabled by setting
the <code class="docutils literal notranslate"><span class="pre">clean_meta_xml</span></code> option to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
<p>Developers can also use the <code class="docutils literal notranslate"><span class="pre">meta_xml_dependencies</span></code> task to update the
<code class="docutils literal notranslate"><span class="pre">meta.xml</span></code> files locally using the versions from CumulusCI’s calculated
project dependencies.</p>
</section>
</section>
<section id="use-tasks-and-flows-from-a-different-project">
<h2>Use Tasks and Flows from a Different Project<a class="headerlink" href="#use-tasks-and-flows-from-a-different-project" title="Link to this heading">¶</a></h2>
<p>Dependency handling is used in a very specific context: to install
dependency packages or metadata bundles in a <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> flow that is
a component of some other flow.</p>
<p>CumulusCI also makes it possible to use automation (tasks and flows)
from another CumulusCI project. This feature supports many use cases,
including:</p>
<ul class="simple">
<li><p>Applying configuration from a dependency project, rather than just
installing the package.</p></li>
<li><p>Running Robot Framework tests that are defined in a dependency.</p></li>
</ul>
<p>For more information, see <a class="reference internal" href="config.html#tasks-and-flows-from-a-different-project"><span class="std std-ref">Tasks and Flows from a Different Project</span></a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="data.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Automate Data Operations</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="connected-orgs.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Connect Persistent Orgs</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Salesforce.org
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Develop a Project</a><ul>
<li><a class="reference internal" href="#set-up-a-dev-org">Set Up a Dev Org</a></li>
<li><a class="reference internal" href="#list-changes">List Changes</a></li>
<li><a class="reference internal" href="#retrieve-changes">Retrieve Changes</a><ul>
<li><a class="reference internal" href="#path"><code class="docutils literal notranslate"><span class="pre">--path</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-and-retrieve-options">List and Retrieve Options</a><ul>
<li><a class="reference internal" href="#include-exclude"><code class="docutils literal notranslate"><span class="pre">--include</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">--exclude</span></code></a></li>
<li><a class="reference internal" href="#types"><code class="docutils literal notranslate"><span class="pre">--types</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#push-changes">Push Changes</a></li>
<li><a class="reference internal" href="#run-apex-tests">Run Apex Tests</a></li>
<li><a class="reference internal" href="#set-up-a-qa-org">Set Up a QA Org</a><ul>
<li><a class="reference internal" href="#create-qa-configurations">Create QA Configurations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manage-dependencies">Manage Dependencies</a><ul>
<li><a class="reference internal" href="#github-repository-dependencies">GitHub Repository Dependencies</a><ul>
<li><a class="reference internal" href="#reference-unmanaged-projects">Reference Unmanaged Projects</a></li>
<li><a class="reference internal" href="#reference-a-specific-tag">Reference a Specific Tag</a></li>
<li><a class="reference internal" href="#skip-unpackaged-in-reference-repositories">Skip <code class="docutils literal notranslate"><span class="pre">unpackaged/*</span></code> in Reference Repositories</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-dependencies">Package Dependencies</a></li>
<li><a class="reference internal" href="#package-install-keys-passwords">Package Install Keys (Passwords)</a></li>
<li><a class="reference internal" href="#unmanaged-metadata-dependencies">Unmanaged Metadata Dependencies</a><ul>
<li><a class="reference internal" href="#specify-a-subfolder">Specify a Subfolder</a></li>
<li><a class="reference internal" href="#inject-namespace-prefixes">Inject Namespace Prefixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pinning-github-dependencies">Pinning GitHub Dependencies</a></li>
<li><a class="reference internal" href="#controlling-github-dependency-resolution">Controlling GitHub Dependency Resolution</a><ul>
<li><a class="reference internal" href="#resolution-strategy-details">Resolution Strategy Details</a></li>
<li><a class="reference internal" href="#customizing-resolution-strategies">Customizing Resolution Strategies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#automatic-cleaning-of-meta-xml-files-on-deploy">Automatic Cleaning of <code class="docutils literal notranslate"><span class="pre">meta.xml</span></code> Files on Deploy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-tasks-and-flows-from-a-different-project">Use Tasks and Flows from a Different Project</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=dac0bbfe"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>